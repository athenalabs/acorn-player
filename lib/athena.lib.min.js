(function(){var __bind=function(b,a){return function(){return b.apply(a,arguments)}},athena={lib:{}};
athena.lib.TrackerInterface=function(){function b(){this.disable=__bind(this.disable,this);this.unregister=__bind(this.unregister,this);this.register=__bind(this.register,this);this.track=__bind(this.track,this);this.identify=__bind(this.identify,this)}b.prototype.identify=function(){throw Error("Method `identify` of class deriving                 from TrackerInterface not implemented.");};b.prototype.track=function(){throw Error("Method `track` of class deriving                 from TrackerInterface not implemented.");};
b.prototype.register=function(){throw Error("Method `register` of class deriving                 from TrackerInterface not implemented.");};b.prototype.unregister=function(){throw Error("Method `unregister` of class deriving                 from TrackerInterface not implemented.");};b.prototype.disable=function(){throw Error("Method `disable` of class deriving                 from TrackerInterface not implemented.");};return b}();var __bind=function(b,a){return function(){return b.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.MixpanelTracker=function(b){function a(a,b){this.disable=__bind(this.disable,this);this.unregister=__bind(this.unregister,this);this.register=__bind(this.register,this);this.track=__bind(this.track,this);this.identify=__bind(this.identify,this);mixpanel.init(a,b)}__extends(a,b);a.prototype.identify=function(a){return mixpanel.identify(a)};a.prototype.track=function(a,b,e){return mixpanel.track(a,b,e)};a.prototype.register=function(a){return mixpanel.register(a)};a.prototype.unregister=
function(a){return mixpanel.unregister(a)};a.prototype.disable=function(a){return mixpanel.disable(a)};return a}(athena.lib.TrackerInterface);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.TrackerManager=function(b){function a(){this.disable=__bind(this.disable,this);this.unregister=__bind(this.unregister,this);this.register=__bind(this.register,this);this.track=__bind(this.track,this);this.identify=__bind(this.identify,this);this.addTracker=__bind(this.addTracker,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.addTracker=function(a){null==this.trackers&&(this.trackers=[]);return this.trackers.push(a)};a.prototype.identify=function(a){var b,
e,f,g,h;g=this.trackers;h=[];e=0;for(f=g.length;e<f;e++)b=g[e],h.push(b.identify(a));return h};a.prototype.track=function(a,b,e){var f,g,h,j,k;j=this.trackers;k=[];g=0;for(h=j.length;g<h;g++)f=j[g],k.push(f.track(a,b,e));return k};a.prototype.register=function(a){var b,e,f,g,h;g=this.trackers;h=[];e=0;for(f=g.length;e<f;e++)b=g[e],h.push(b.register(a));return h};a.prototype.unregister=function(a){var b,e,f,g,h;g=this.trackers;h=[];e=0;for(f=g.length;e<f;e++)b=g[e],h.push(b.unregister(a));return h};
a.prototype.disable=function(a){var b,e,f,g,h;g=this.trackers;h=[];e=0;for(f=g.length;e<f;e++)b=g[e],h.push(b.disable(a));return h};return a}(athena.lib.TrackerInterface);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.Model=function(b){function a(){this.sync=__bind(this.sync,this);this.toJSONString=__bind(this.toJSONString,this);this.toJSON=__bind(this.toJSON,this);this.clone=__bind(this.clone,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.property=function(a,b){null==b&&(b={});if(!_.isString(a))throw Error("property method: first argument must be a string");athena.lib.util.isStrictObject(b)||(b={});return function(e){var f;!1!==b.setter&&null!=e&&this.set(a,e);return null!=
(f=this.get(a))?f:b["default"]}};a.prototype.clone=function(){return new this.constructor(this.toJSON())};a.prototype.toJSON=function(){return JSON.parse(JSON.stringify(this.attributes))};a.prototype.toJSONString=function(){return JSON.stringify(this.toJSON())};a.prototype.sync=function(a,b,e){null==e.xhrFields&&(e.xhrFields={});e.xhrFields.withCredentials=!0;e.crossDomain=!0;return Backbone.sync(a,b,e)};return a}(Backbone.Model);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.Router=function(b){function a(){this.routeInternalLinks=__bind(this.routeInternalLinks,this);this.navigateBrowser=__bind(this.navigateBrowser,this);this.go=__bind(this.go,this);this.initialize=__bind(this.initialize,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.initialize=function(d){var b,e=this;a.__super__.initialize.apply(this,arguments);this.options=null!=d?d:{};this.eventhub=null!=(b=this.options.eventhub)?b:this;this.app=this.options.app;return this.eventhub.on("Go",
function(a){return e.go(a)})};a.prototype.go=function(a){if(null==a)throw Error("Router::go requires a `url` parameter");if(a.match(/^(https?:)?\/\//i))this.navigateBrowser(a);else return this.navigate(a,{trigger:!0})};a.prototype.navigateBrowser=function(a){return window.location.href=a};a.prototype.routeInternalLinks=function(){var a;a=this;return $(document).on("click","a:not([data-bypass])",function(b){if("a"!==this.nodeName.toLowerCase()||this.origin!==window.location.origin)return b;b.preventDefault();
return a.navigate(this.pathname,{trigger:!0})})};return a}(Backbone.Router);athena.lib.util={};
athena.lib.util.keys={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,
KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,LEFT_META:91,RIGHT_META:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUALS:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,
CLOSE_BRACKET:221,SINGLE_QUOTE:222};var test,xdescribe,xit,__bind=function(b,a){return function(){return b.apply(a,arguments)}};athena.lib.util.test={};test=athena.lib.util.test;test.view_with_options=function(b,a,d){a=a||lib.View;d=d||"body";b=new a(b);b.render();$(d).append(b.$el);return b};test.view_with_content=function(b){var a;a=test.view_with_options.apply(this,_.rest(arguments));a.$el.append(b);return a};
test.throwsExceptionWithString=function(b,a,d){var c;c=!1;null!=d?d instanceof Array||(d=[d]):d=[];try{a.apply(null,d)}catch(e){c=0<=e.message.search(b)}return c};
test.describeProperty=function(b,a,d,c,e){null==d&&(d={});null==c&&(c={});null==c.setter&&(c.setter=!0);return describe(""+b.name+"::"+a,function(){it("should be a function",function(){return expect(typeof b.prototype[a]).toBe("function")});it("should get the value of the attribute",function(){var e,g;e=new b(d);expect(e[a]()).toEqual(null!=(g=c["default"])?g:e.get(a));e.set(a,"foo");expect(e[a]()).toEqual(e.get(a));return expect(e[a]()).toEqual("foo")});!1===c.setter?it("should NOT set the value of the attribute (setter is false)",
function(){var e,g,h,j;e=new b(d);expect(e[a]()).toEqual(null!=(g=c["default"])?g:e.get(a));expect(e[a]()).not.toEqual("foo");expect(e[a]("foo")).toEqual(null!=(h=c["default"])?h:e.get(a));expect(e[a]()).toEqual(null!=(j=c["default"])?j:e.get(a));return expect(e[a]()).not.toEqual("foo")}):it("should set the value of the attribute",function(){var e,g;e=new b(d);expect(e[a]()).not.toEqual("foo");expect(e[a]()).toEqual(null!=(g=c["default"])?g:e.get(a));expect(e[a]("foo")).toEqual(e.get(a));return expect(e[a]()).toEqual("foo")});
it("should use default value "+c["default"],function(){var e;e=new b(d);null!=c["default"]&&expect(e.get(a)).not.toEqual(c["default"]);return e.get(a)?expect(e[a]()).toEqual(e.get(a)):null!=d[a]&&d[a]!==c["default"]?expect(e[a]()).not.toEqual(c["default"]):expect(e[a]()).toEqual(c["default"])});return"function"===typeof e?e():void 0})};
test.describeView=function(b,a,d,c){"function"===typeof d&&(c=d,d={});null==d&&(d={});return describe(""+b.name+": view tests",function(){it("should be a function",function(){return expect(typeof b).toBe("function")});it("should derive from "+a.name,function(){return expect(athena.lib.util.derives(b,a)).toBe(!0)});it("should be constructible with given options",function(){var a;expect(function(){return new b(d)}).not.toThrow();a=new b(d);expect(a instanceof b).toBe(!0);return expect(a.options).toBe(d)});
it("should have a className property of type string",function(){return expect(typeof b.prototype.className).toBe("string")});it("should have a defaults function, that returns an object",function(){var a;expect(typeof b.prototype.defaults).toBe("function");a=new b(d);return expect(typeof a.defaults()).toBe("object")});it("should have an events function, that returns an object",function(){var a;expect(typeof b.prototype.events).toBe("function");a=new b(d);return expect(typeof a.events()).toBe("object")});
it("should have an elAttributes function, that returns an object",function(){var a;expect(typeof b.prototype.elAttributes).toBe("function");a=new b(d);return expect(typeof a.elAttributes()).toBe("object")});it("should set @eventhub in initialize (i.e. should call super)",function(){var a,c;a=new athena.lib.View;c=_.defaults({eventhub:a},d);c=new b(c);return expect(c.eventhub).toBe(a)});it("should have render return @",function(){var a;a=new b(d);return expect(a.render()).toBe(a)});it("should be rendering after render (i.e. should call super)",
function(){var a;a=new b(d);expect(a.rendering).toBe(!1);a.render();return expect(a.rendering).toBe(!0)});return"function"===typeof c?c():void 0})};test.describeDefaults=function(b,a,d){null==d&&(d={});return describe(""+b.name+"::defaults",function(){var c;c=(new b(d)).defaults();return _.each(a,function(a,b){return it("should have options."+b+" default to "+JSON.stringify(a),function(){return expect(c[b]).toEqual(a)})})})};
test.describeSubview=function(b,a){var d,c,e,f,g;c=b.View;g=b.viewOptions;f=b.subviewAttr;d=b.Subview;e=b.checkDOM;null==e&&(e=function(a,b){return a.parentNode===b});return describe(""+c.name+"::"+f+" subview",function(){it("should be defined on init",function(){var a;a=new c(g);return expect(a[f]).toBeDefined()});it("should be an instanceof "+d.name,function(){var a;a=new c(g);return expect(a[f]instanceof d).toBe(!0)});it("should not be rendering initially",function(){var a;a=new c(g);return expect(a[f].rendering).toBe(!1)});
it("should be rendering with "+c.name,function(){var a;a=new c(g);a.render();return expect(a[f].rendering).toBe(!0)});it("should share eventhub with "+c.name,function(){var a;a=new c(g);a.render();return expect(a[f].eventhub).toBe(a.eventhub)});it("should be a DOM child of the "+c.name,function(){var a;a=new c(g);a.render();return expect(e(a[f].el,a.el)).toBe(!0)});return"function"===typeof a?a():void 0})};
test.describeFormComponent=function(b,a){var d,c;d=b.View;c=b.name;return describe(""+d.name+"::"+c,function(){it("should be a FormComponentView",function(){var a;a=new d;return expect(a[c]instanceof athena.lib.FormComponentView).toBe(!0)});athena.lib.util.derives(d,athena.lib.FormView)&&(it("should be added to "+d.name+"::componentViews",function(){var a;a=new d;return expect(_.contains(a.componentViews,a[c])).toBe(!0)}),it("should share the eventhub with "+d.name,function(){var a;a=new d;return expect(a[c].eventhub).toBe(a.eventhub)}));
_.each("id type label placeholder helpBlock helpInline".split(" "),function(a){if(b[a])return it("should have "+a+": "+b[a],function(){var f;f=new d;return expect(f[c].options[a]).toBe(b[a])})});return"function"===typeof a?a():void 0})};
test.EventSpy=function(){function b(a,b){this.target=a;this.eventName=b;this.callsSinceLastCheck=__bind(this.callsSinceLastCheck,this);this.trigger=__bind(this.trigger,this);this.reset=__bind(this.reset,this);this.reset();this.target.on(null!=b?b:"all",this.trigger)}b.prototype.reset=function(){this.triggered=!1;this._callsSinceLastCheck=this.triggerCount=0;return this.arguments=[]};b.prototype.trigger=function(){this.triggered=!0;this.triggerCount++;this._callsSinceLastCheck++;return this.arguments.push(_.toArray(arguments))};
b.prototype.callsSinceLastCheck=function(){var a;a=this._callsSinceLastCheck;this._callsSinceLastCheck=0;return a};return b}();test.expectEventSpyBehaviors=function(b,a){var d,c,e,f,g,h,j,k,m,n,l;l=[];k=0;for(m=a.length;k<m;k++)g=a[k],e=null!=(n=g())?n:{},l.push(function(){var a;a=[];for(j in b)h=b[j],f=e.hasOwnProperty(j),c=h.callsSinceLastCheck(),expect(!!c).toBe(f),f&&null!=(d=e[j])?(_.isArray(d)||(d=[d]),a.push(expect(_.last(h.arguments)).toEqual(d))):a.push(void 0);return a}());return l};
test.xit=function(b,a,d){null==d&&(d="---- TODO");b=""+d+": "+b;console.log(b);return it(b,function(){})};xit=test.xit;test.xdescribe=function(b,a,d){null==d&&(d="---- TODO");b=""+d+": "+b;console.log(b);return describe(b,function(){return it("",function(){})})};xdescribe=test.xdescribe;
test.conditionalDisablers=function(b,a){var d,c,e,f;null==b&&(b=!0);null==a&&(a="Conditionally Disabled");c=function(b,d){return test.xit(b,d,a)};d=function(b,d){return test.xdescribe(b,d,a)};f=function(b,d){console.log(""+a+": "+b);return it.apply(null,arguments)};e=function(b,d){console.log(""+a+": "+b);return describe.apply(null,arguments)};return b?[c,d]:[f,e]};var derives,util;util=athena.lib.util;util.derives=derives=function(b,a){return!b||!b.__super__?!1:a.prototype===b.__super__?!0:derives(b.__super__.constructor,a)};util.isOrDerives=function(b,a){return b===a||derives(b,a)};util.isStrictObject=function(b){return"[object Object]"===(null!=b?b.toString():void 0)};util.elementInDom=function(b){if(b instanceof $)return _.all(b,util.elementInDom);for(;b=null!=b?b.parentNode:void 0;)if(b===document)return!0;return!1};__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};athena.lib.util.RemoteResource={};athena.lib.util.RemoteResourceInterface={};util=athena.lib.util;
util.RemoteResourceInterface=function(){function b(){}b.prototype.url=function(){};b.prototype.data=function(){};b.prototype.reset=function(){};b.prototype.synced=function(){return!0};b.prototype.sync=function(a){if(a.success)return a.success(this.data())};return b}();
util.RemoteResource=function(b){function a(a){this.sync=__bind(this.sync,this);this.synced=__bind(this.synced,this);this.reset=__bind(this.reset,this);this.data=__bind(this.data,this);this.url=__bind(this.url,this);this.params=_.clone(a);if(!this.params.url)throw Error("remoteResource `url` AJAX param required for sync.");this.url(this.params.url)}__extends(a,b);a.prototype.url=function(a){a&&(this.reset(),this._url=a);return this._url};a.prototype.data=function(){if(!this._synced)throw Error("not synced. cannot access data.");
return _.clone(this._data)};a.prototype.reset=function(){this._synced=!1;return this._data=void 0};a.prototype.synced=function(){return this._synced};a.prototype.sync=function(a){var b,e=this;null==a&&(a={});if(a.url)throw Error("remoteResource.sync doesn't take url parameter.");a=_.extend({},this.params,a);b=a.success||function(){};if(this._synced&&!a.force)return b(this.data()),this;a.url=this._url;a.success=function(a,d,h){e._data=a;e._synced=!0;return b(e.data(),d,h)};$.ajax(a);return this};return a}(util.RemoteResourceInterface);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.View=function(b){function a(){this.softRender=__bind(this.softRender,this);this.render=__bind(this.render,this);this.destroy=__bind(this.destroy,this);this.initialize=__bind(this.initialize,this);this.elAttributes=__bind(this.elAttributes,this);this.events=__bind(this.events,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className="";a.classNameExtend=function(a){var b;return(b=this.prototype.className)?b+" "+
a:a};a.prototype.defaults=function(){return{extraClasses:[],eventhub:void 0}};a.prototype.events=function(){return{}};a.prototype.elAttributes=function(){return{}};a.prototype.initialize=function(){var b,c=this;a.__super__.initialize.apply(this,arguments);_.defaults(this.options,this.defaults());this.eventhub=this.options.eventhub||this;if(this.options.extraClasses)return b=this.options.extraClasses,_.isString(b)&&(b=[b]),_.each(b,function(a){return c.$el.addClass(a)})};a.prototype.destroy=function(){this.rendering=
!1;this.remove();this.unbind();return this.uninitialize()};a.prototype.rendering=!1;a.prototype.render=function(){var b=this;a.__super__.render.apply(this,arguments);this.rendering=!0;this.delegateEvents();_.each(this.elAttributes(),function(a,e){if(b.$el.attr(e)!==a)return b.$el.attr(e,a)});return this};a.prototype.softRender=function(){this.rendering&&this.render();return this};a.prototype.uninitialize=function(){};return a}(Backbone.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.ContainerView=function(b){function a(){this.render=__bind(this.render,this);this.content=__bind(this.content,this);this.initialize=__bind(this.initialize,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("container-view");a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);return this.content(this.options.content)};a.prototype.content=function(a){null!=a&&(this.rendering&&this._content instanceof
Backbone.View&&this._content.remove(),this._content=a,this.softRender());return this._content};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();if(this._content instanceof Backbone.View)this._content.render(),this.$el.append(this._content.el);else if(this._content instanceof $)this.$el.append(this._content);else if(_.isString(this._content))this.$el.append(this._content);else if(_.isObject(this._content)){if(!this.template)throw Error("ContainerView has no template to use.");
this.$el.html(this.template(this._content))}else if(null!=this._content)throw Error("ContainerView content type unknown.");return this};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};
athena.lib.App=function(){function b(a){this.options=a;this.start=__bind(this.start,this);this.showPage=__bind(this.showPage,this);this.initialize=__bind(this.initialize,this);this.eventhub=this;this.initialize()}_.extend(b.prototype,Backbone.Events);b.prototype.View=athena.lib.ContainerView;b.prototype.Router=athena.lib.Router;b.prototype.initialize=function(){this.view=new this.View({eventhub:this.eventhub});return this.router=new this.Router({eventhub:this.eventhub,app:this})};b.prototype.showPage=
function(a){this.view.content(a);if(!this.view.rendering)return this.view.render()};b.prototype.start=function(){return Backbone.history.start({pushState:!0})};return b}();__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.DirectiveView=function(b){function a(){this.addPart=__bind(this.addPart,this);this.renderPart=__bind(this.renderPart,this);this.renderSeparator=__bind(this.renderSeparator,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.tagName="span";a.prototype.className=a.classNameExtend("directive-view ellipsis-overflow");a.prototype.defaults=
function(){return _.extend(a.__super__.defaults.apply(this,arguments),{separator:" / ",parts:[]})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);return this.parts=_.clone(this.options.parts)};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();_.each(this.parts,this.renderPart);return this};a.prototype.renderSeparator=function(){this.$el.append($("<span>").append(this.options.separator));return this};a.prototype.renderPart=function(a){a instanceof
Backbone.View?this.$el.append(a.render().el):this.$el.append(a);a!==_.last(this.parts)&&this.renderSeparator();return this};a.prototype.addPart=function(a){this.parts.push(a);this.rendering&&(a!==_.first(this.parts)&&this.renderSeparator(),this.renderPart(a));return this};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.DocView=function(b){function a(){this.doc=__bind(this.doc,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("doc-view");a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{doc:"",render:function(a){return a}})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,
arguments);this.doc(this.options.doc);if(!_.isFunction(this.options.render))throw Error("render should be a function");};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();this.$el.html(this.options.render(this.doc()));return this};a.prototype.doc=function(a){null!=a&&(this._doc=a,this.softRender());return this._doc};a.renderMarkdown=function(a){if("undefined"===typeof marked||null===marked)throw Error("marked must be included");return marked(a)};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.GistView=function(b){function a(){this.parseGist=__bind(this.parseGist,this);this.gist=__bind(this.gist,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("gist-view");a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{gist:void 0,files:void 0,render:athena.lib.DocView.renderMarkdown})};a.prototype.initialize=
function(){a.__super__.initialize.apply(this,arguments);return this.gist(this.options.gist)};a.prototype.gist=function(a){var b=this;null!=a&&(this._gist=a,$.ajax({url:"https://api.github.com/gists/"+a,dataType:"jsonp",success:function(a){b.doc(b.parseGist(a));return b.softRender()},error:function(a){b.doc("Error retrieving gist.");b.softRender();return console.log(a.responseText)}}));return this._gist};a.prototype.parseGist=function(a){var b,e;b=null!=(e=this.options.files)?e:_.keys(a.data.files);
b=_.map(b,function(b){return a.data.files[b]});return _.pluck(b,"content").join("\n\n")};return a}(athena.lib.DocView);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.GridView=function(b){function a(){this.refreshMasonry=__bind(this.refreshMasonry,this);this.removeTileForModel=__bind(this.removeTileForModel,this);this.renderTileForModel=__bind(this.renderTileForModel,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.tagName="ul";a.prototype.className=a.classNameExtend("grid-view thumbnails");a.prototype.defaults=
function(){return _.extend(a.__super__.defaults.apply(this,arguments),{tileOptions:{},masonry:!1,columnWidth:void 0,gutterWidth:10})};a.prototype.initialize=function(){var b=this;a.__super__.initialize.apply(this,arguments);this.tileViews=[];this.listenTo(this.collection,"add",function(a){if(b.rendering)return b.renderTileForModel(a)});this.listenTo(this.collection,"remove",function(a){if(b.rendering)return b.removeTileForModel(a)});this.listenTo(this.collection,"reset",function(){return b.softRender()});
return this.listenTo(this.collection,"all",function(){return b.refreshMasonry()})};a.prototype.render=function(){a.__super__.render.apply(this,arguments);_.each(this.tileViews,function(a){return a.destroy()});this.$el.empty();this.collection.each(this.renderTileForModel);setTimeout(this.refreshMasonry,0);return this};a.prototype.renderTileForModel=function(a){a=new athena.lib.GridTileView(_.extend({},this.options.tileOptions,{eventhub:this.eventhub,model:a}));a.on("all",_.bind(this.trigger,this));
this.tileViews.push(a);this.$el.append(a.render().el);return this};a.prototype.removeTileForModel=function(a){var b;if(b=_.find(this.tileViews,function(b){return b.model===a}))return this.tileViews.pop(b),b.$el.parent().remove(),b.destroy(),this};a.prototype.refreshMasonry=function(){var a;if(this.options.masonry){if(util.elementInDom(this.el))return a=this.$el,this._masonized?setTimeout(function(){return a.masonry("reload")},0):(this._masonized=!0,a.masonry({itemSelector:"li.grid-tile-view.thumbnail",
columnWidth:this.options.columnWidth,gutterWidth:this.options.gutterWidth})),a.imagesLoaded(function(){return a.masonry("reload")});console.log("WARNING: attempt to masonize mediaListView when not in DOM")}};return a}(athena.lib.View);
athena.lib.GridTileView=function(b){function a(){this.render=__bind(this.render,this);this.defaults=__bind(this.defaults,this);this.events=__bind(this.events,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.tagName="li";a.prototype.className=a.classNameExtend("grid-tile-view thumbnail");a.prototype.template=_.template('<a href="<%= link %>">\n  <% if (icon) { %>\n    <i class="<%= icon %>"></i>\n  <% } %>\n  <% if (thumbnail) { %>\n    <img src="<%= thumbnail %>" />\n  <% } %>\n</a>\n<% if (text) { %>\n  <div class="text"><%= text %></div>\n<% } %>');
a.prototype.events=function(){var b=this;return _.extend(a.__super__.events.apply(this,arguments),{"click a":function(a){var e;b.trigger("GridTile:Click",b);e=b.options.tileVars(b.model).link;if(!(e&&"#"!==e))return a.preventDefault(),!1}})};a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{tileVars:function(a){return{link:("function"===typeof a.get?a.get("link"):void 0)||"#",text:("function"===typeof a.get?a.get("text"):void 0)||"",icon:("function"===typeof a.get?
a.get("icon"):void 0)||"",thumbnail:("function"===typeof a.get?a.get("thumbnail"):void 0)||""}}})};a.prototype.render=function(){var b;a.__super__.render.apply(this,arguments);this.$el.empty();b=this.options.tileVars(this.model);_.defaults(b,{link:"#",thumbnail:"",icon:void 0,text:void 0});this.$el.html(this.template(b));return this};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.InputView=function(b){function a(){this.onEnter=__bind(this.onEnter,this);this.onKeyup=__bind(this.onKeyup,this);this.onBlur=__bind(this.onBlur,this);this.validate=__bind(this.validate,this);this.validationErrors=__bind(this.validationErrors,this);this.value=__bind(this.value,this);this.elAttributes=__bind(this.elAttributes,this);this.initialize=__bind(this.initialize,this);this.events=__bind(this.events,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,
arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("input-view");a.prototype.tagName="input";a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{type:"text",placeholder:"",validateOnBlur:!0,blurOnEnter:!0})};a.prototype.events=function(){return _.extend(a.__super__.events.apply(this,arguments),{blur:this.onBlur,keyup:this.onKeyup})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);return this.value(this.options.value)};
a.prototype.elAttributes=function(){return{placeholder:this.options.placeholder,type:this.options.type,value:this.value()}};a.prototype.value=function(a){null!=a&&this.$el.val(a);return this.$el.val()};a.prototype.validationErrors=function(){return[]};a.prototype.validate=function(){return _.isEmpty(this.validationErrors(this.value()))};a.prototype.onBlur=function(){if(this.options.validateOnBlur)return this.validate()};a.prototype.onKeyup=function(a){if(a.keyCode===util.keys.ENTER)return this.onEnter(a)};
a.prototype.onEnter=function(){if(this.options.blurOnEnter)return this.$el.trigger("blur")};return a}(athena.lib.View);var InputView,__bind=function(b,a){return function(){return b.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};InputView=athena.lib.InputView;
athena.lib.FormComponentView=function(b){function a(){this.validate=__bind(this.validate,this);this.validationErrors=__bind(this.validationErrors,this);this.value=__bind(this.value,this);this.renderErrors=__bind(this.renderErrors,this);this.renderHelp=__bind(this.renderHelp,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("form-component-view control-group");
a.prototype.template=_.template('<label class="control-label"><%= label %></label>\n<div class="controls">\n  <span class="help-inline"></span>\n  <span class="help-block"></span>\n</div>');a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{inputView:void 0,noValidation:!1,helpInline:"",helpBlock:"",label:""})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);this.inputView=this.options.inputView;null==this.inputView&&(this.inputView=
new InputView(_.extend({},this.options,{eventhub:this.eventhub})));this.inputView instanceof InputView||TypeError(this.inputView,"InputView");return this.inputView.validate=this.validate};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.html(this.template({label:this.options.label}));this.renderHelp();this.$(".controls").prepend(this.inputView.render().el);return this};a.prototype.renderHelp=function(){this.$el.removeClass("success");this.$el.removeClass("error");this.$(".help-inline").html(this.options.helpInline);
this.$(".help-block").html(this.options.helpBlock);return this};a.prototype.renderHelpMessage=function(a,b,e){this.renderHelp();e&&this.$el.addClass(e);this.$(".help-"+b).html(a);return this};a.prototype.renderErrors=function(a){this.renderHelpMessage(a[0],"inline","error");return this};a.prototype.value=function(a){return this.inputView.value(a)};a.prototype.validationErrors=function(a){return this.inputView.validationErrors(a)};a.prototype.validate=function(){var a;this.renderHelp();if(this.options.noValidation)return!0;
a=this.validationErrors(this.value());if(_.isEmpty(a))return!0;this.renderErrors(a);return!1};return a}(athena.lib.View);var FormComponentView,__bind=function(b,a){return function(){return b.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};FormComponentView=athena.lib.FormComponentView;
athena.lib.FormView=function(b){function a(){this.submit=__bind(this.submit,this);this.validate=__bind(this.validate,this);this.values=__bind(this.values,this);this.getComponentView=__bind(this.getComponentView,this);this.addComponentView=__bind(this.addComponentView,this);this.renderComponentView=__bind(this.renderComponentView,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.elAttributes=__bind(this.elAttributes,this);this.defaults=__bind(this.defaults,
this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.tagName="form";a.prototype.className=a.classNameExtend("form-view");a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{noValidation:!1})};a.prototype.elAttributes=function(){return _.extend(a.__super__.elAttributes.apply(this,arguments),{onsubmit:"return false;"})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);return this.componentViews=[]};
a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();_.each(this.componentViews,this.renderComponentView);return this};a.prototype.renderComponentView=function(a){if(!(a instanceof FormComponentView))throw Error("view must be of type FormComponentView");this.$el.append(a.render().el);return this};a.prototype.addComponentView=function(a){if(!(a instanceof FormComponentView))throw Error("view must be of type FormComponentView");this.componentViews.push(a);this.rendering&&
this.renderComponentView(a);return this};a.prototype.getComponentView=function(a){return _.find(this.componentViews,function(b){return b.id===a})};a.prototype.values=function(){return _.object(_.map(this.componentViews,function(a){return[a.id,a.value()]}))};a.prototype.validate=function(){return this.options.noValidation?!0:_.all(this.componentViews,function(a){return a.validate()})};a.prototype.submit=function(){if(!this.validate())return this.trigger("FormView:Submit:Error","Validation failed."),
!1;this.trigger("FormView:Submit:Success");return!0};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.LoadingView=function(b){function a(){this.renderLoading=__bind(this.renderLoading,this);this.render=__bind(this.render,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("loading-view");a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{img:"http://athena.ai/img/gray-a-logo.png"})};a.prototype.render=function(){a.__super__.render.apply(this,arguments);
this.$el.empty();this.$el.append($("<img>").attr("src",this.options.img));this.$el.append("Loading . . .");return this};a.prototype.renderLoading=function(){this.$("img").transition(this.options.animation);return this};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.NavListView=function(b){function a(){this.onSelectElement=__bind(this.onSelectElement,this);this.selectItem=__bind(this.selectItem,this);this.highlightItem=__bind(this.highlightItem,this);this.$item=__bind(this.$item,this);this.renderItem=__bind(this.renderItem,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);this.events=__bind(this.events,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,
b);a.prototype.className=a.classNameExtend("nav-list-view well");a.prototype.template=_.template('<ul class="nav nav-list"></ul>');a.prototype.events=function(){return _.extend(a.__super__.events.apply(this,arguments),{"click li[data-nav]":this.onSelectElement,"click a[data-nav]":this.onSelectElement})};a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{followLinks:!1,items:[]})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);
return this.items=_.clone(this.options.items)};a.prototype.render=function(){var b,c,e,f;a.__super__.render.apply(this,arguments);this.$el.empty();this.$el.html(this.template());this.$el.css("padding","8px 0px");f=this.items;c=0;for(e=f.length;c<e;c++)b=f[c],this.$("ul").append(this.renderItem(b));return this};a.prototype.renderItem=function(a){var b,e;b=$("<li>");a.className&&b.addClass(a.className);a.id&&b.attr("data-nav",a.id);a.leftIcon&&b.append($("<i>").addClass(a.leftIcon));b.append($("<span>").append(a.text));
a.rightIcon&&b.append($("<i>").addClass(a.rightIcon));a.link&&(e=$("<a>").attr("href",a.link),a.id&&e.attr("data-nav",a.id),e.append(b.children()),b.append(e));return b};a.prototype.$item=function(a){return this.$("li[data-nav='"+a+"']")};a.prototype.highlightItem=function(a){var b;b=this.$("li");b.removeClass("active");b.find("i").removeClass("icon-white");a=this.$item(a);a.addClass("active");a.find("i").addClass("icon-white");return this};a.prototype.selectItem=function(a){if(!_.find(this.items,
function(b){return b.id===a}))throw Error("No item with id '"+a+"'");this.trigger("NavList:Select",this,a);this.highlightItem(a);return this};a.prototype.onSelectElement=function(a){var b;if(!this.options.followLinks)return b=$(a.target.parentElement).attr("data-nav"),this.selectItem(b),a.preventDefault(),!1};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.NavListTabView=function(b){function a(){this.select=__bind(this.select,this);this.renderView=__bind(this.renderView,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("nav-list-tab-view row-fluid");a.prototype.template=_.template('<div class="nav-list-tab-side span4"></div>\n<div class="nav-list-tab-content span8"></div>');
a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{items:[],views:{},selected:void 0})};a.prototype.initialize=function(){var b=this;a.__super__.initialize.apply(this,arguments);this.selected=this.options.selected;this.views=_.clone(this.options.views);this.navListView=new athena.lib.NavListView({eventhub:this.eventhub,items:this.options.items});return this.listenTo(this.navListView,"NavList:Select",function(a,e){return b.select(e)})};a.prototype.render=function(){a.__super__.render.apply(this,
arguments);this.$el.empty();this.$el.html(this.template());this.$(".nav-list-tab-side").append(this.navListView.render().el);this.renderView(this.selected);return this};a.prototype.renderView=function(a){this.navListView.highlightItem(a);(a=this.views[a])&&this.$(".nav-list-tab-content").append(a.render().el);return this};a.prototype.select=function(a){var b;null!=(b=this.views[this.selected])&&"function"===typeof b.remove&&b.remove();this.selected=a;this.rendering&&this.renderView(a);this.trigger("NavListTab:Select",
this,a);return this};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.NavigationView=function(b){function a(){this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("navigation-view navbar");a.prototype.template=_.template('<div class="navbar-inner">\n  <% if (brand) { %>\n    <a class="brand" href="#"><%= brand %></a>\n  <% } %>\n  <ul class="nav toolbar-view pull-right"></ul>\n</div>');
a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{brand:"",buttons:[]})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);return this.toolbarView=new athena.lib.ToolbarView({eventhub:this.eventhub,buttons:this.options.buttons})};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();this.$el.html(this.template({brand:this.options.brand}));this.toolbarView.setElement(this.$(".toolbar-view"));this.toolbarView.render();
return this};return a}(athena.lib.View);__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};athena.lib.PageView=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("page-view");return a}(athena.lib.View);var Popover,__bind=function(b,a){return function(){return b.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.PopoverView=function(b){function a(){this.destroy=__bind(this.destroy,this);this.toggle=__bind(this.toggle,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);this.popover=__bind(this.popover,this);this.render=__bind(this.render,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("popover-view");a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,
arguments),{trigger:"click",delay:{show:300,hide:100}})};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.popover({animation:this.options.animation,placement:this.options.placement,trigger:this.options.trigger,title:this.options.title,delay:this.options.delay,content:this});return this};a.prototype.popover=function(a){$(this.options.popover).popover(a);return this};a.prototype.show=function(){return this.popover("show")};a.prototype.hide=function(){return this.popover("hide")};
a.prototype.toggle=function(){return this.popover("toggle")};a.prototype.destroy=function(){$(this.options.popover).popover("destroy");return a.__super__.destroy.apply(this,arguments)};return a}(athena.lib.ContainerView);console.log("patching Popover");Popover=$.fn.popover.Constructor;Popover.prototype._setContent=Popover.prototype.setContent;
Popover.prototype.setContent=function(){var b,a,d,c;b=this.tip();c=this.getTitle();a=this.getContent();d=this.options.html?"html":"text";c?(b.find(".popover-title")[d](c),b.find(".popover-title").show()):b.find(".popover-title").hide();if(a instanceof Backbone.View)b.find(".popover-content").empty(),b.find(".popover-content").append(a.render().$el);else if(a instanceof $)b.find(".popover-content").empty(),b.find(".popover-content").append(a);else b.find(".popover-content")[d](a);return b.removeClass("fade top bottom left right in")};__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.TextareaInputView=function(b){function a(){this.elAttributes=__bind(this.elAttributes,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("textarea-input-view");a.prototype.tagName="textarea";a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{rows:3})};a.prototype.elAttributes=function(){return{placeholder:this.options.placeholder,rows:this.options.rows,
value:this.value()}};return a}(athena.lib.InputView);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.TitleView=function(b){function a(){this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.tagName="span";a.prototype.className=a.classNameExtend("title-view ellipsis-overflow");a.prototype.template=_.template('<% if (link) { %><a href="<%= link %>"><% } %>\n<% if (icon) { %><img class="icon" src="<%= icon %>"><% } %>\n<<%= tag %>><%= text %></<%= tag %>>\n<% if (link) { %></a><% } %>');
a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{titleTag:"span"})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);if(!this.model)throw Error("TitleView requires a model parameter");if(!this.model.text)throw Error("TitleView.model requires a text parameter");};a.prototype.render=function(){var b,c,e;a.__super__.render.apply(this,arguments);this.$el.empty();this.$el.html(this.template({link:null!=(b=this.model.link)?b:"",icon:null!=
(c=this.model.icon)?c:"",text:null!=(e=this.model.text)?e:"",tag:this.options.titleTag}));return this};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.ToolbarInputView=function(b){function a(){this.value=__bind(this.value,this);this.elAttributes=__bind(this.elAttributes,this);this.render=__bind(this.render,this);this.initialize=__bind(this.initialize,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("toolbar-input-view");a.prototype.tagName="div";a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),
{buttons:[]})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);this.toolbarView=new athena.lib.ToolbarView({eventhub:this.eventhub,buttons:this.options.buttons});return this.listenTo(this.toolbarView,"all",_.bind(this.trigger,this))};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();this.$el.append(this.toolbarView.render().el);return this};a.prototype.elAttributes=function(){return{}};a.prototype.value=function(){};return a}(athena.lib.InputView);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.ToolbarView=function(b){function a(){this.renderButtonGroup=__bind(this.renderButtonGroup,this);this.renderDropdownButtonFromObject=__bind(this.renderDropdownButtonFromObject,this);this.renderButtonFromObject=__bind(this.renderButtonFromObject,this);this.renderButton=__bind(this.renderButton,this);this.render=__bind(this.render,this);this.button=__bind(this.button,this);this.initialize=__bind(this.initialize,this);this.events=__bind(this.events,this);return a.__super__.constructor.apply(this,
arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("toolbar-view");a.prototype.events=function(){var b=this;return _.extend(a.__super__.events.apply(this,arguments),{"click button:not(.dropdown-toggle)":function(a){var e;e=a.target;"I"===e.tagName&&(e=e.parentNode);e.id&&b.trigger("Toolbar:Click:"+e.id,b,a);return b.trigger("Toolbar:Click",b,a)},"click .dropdown-toggle":function(a){var e;e=a.target;"I"===e.tagName&&(e=e.parentNode);(e=$(e).closest(".btn-group").attr("id"))&&b.trigger("Toolbar:Click:"+
e,b,a);return b.trigger("Toolbar:Click",b,a)},"click .dropdown-link":function(a){var e,f;f=a.target;"I"===f.tagName&&(f=f.parentNode);e=$(f).closest(".btn-group").attr("id");f.id&&e&&b.trigger("Toolbar:Click:"+e+":"+f.id,b,a);f.id&&b.trigger("Toolbar:Click:"+f.id,b,a);return b.trigger("Toolbar:Click",b,a)}})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);return this.buttons=this.options.buttons||[]};a.prototype.button=function(a){var b,e;b=[];e=function(a,d){return _.each(a,
function(a){if(_.isArray(a))return e(a,d);if(a.id===d)return b.push(a)})};e(this.buttons,a);return b.shift()};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();this.$el.append(this.renderButtonGroup(this.buttons).children());return this};a.prototype.renderButton=function(a){if(a instanceof Backbone.View)return a.render().$el;if(a instanceof $)return a;if(_.isString(a))return this.renderButtonFromObject({text:a});if(_.isArray(a))return this.renderButtonGroup(a);
if(_.isObject(a)&&_.isArray(a.dropdown))return this.renderDropdownButtonFromObject(a);if(_.isObject(a))return this.renderButtonFromObject(a)};a.prototype.renderButtonFromObject=function(a){var b,e,f;b=$("<button>");b.addClass("btn");a.icon&&b.append($("<i class='"+a.icon+"'>"));a.text&&a.icon&&b.append(" ");a.text&&b.append(a.text);a.className&&b.addClass(a.className);a.id&&b.attr("id",a.id);a.tooltip&&(e=a.tooltip,_.isString(e)&&(e={title:a.tooltip}),b.tooltip(e));_.each(null!=(f=a.events)?f:{},
function(a,d){return b.on(d,a)});return b};a.prototype.renderDropdownButtonFromObject=function(a){var b,e,f;b=$('<div class="btn-group">');a.className&&b.addClass(a.className);a.id&&b.attr("id",a.id);f=$('<button class="btn dropdown-toggle" data-toggle="dropdown">');a.icon&&f.append($("<i class='"+a.icon+"'>"));a.text&&a.icon&&f.append(" ");a.text&&f.append(a.text);f.append(" <i class='caret'>");b.append(f);e=$('<ul class="dropdown-menu">');_.each(a.dropdown,function(a){var b;b=$('<a href="#" class="dropdown-link">');
a.id&&b.attr("id",a.id);a.leftIcon&&b.append($("<i class='"+a.leftIcon+"'>"));a.text&&b.append(a.text);a.rightIcon&&b.append($("<i class='"+a.rightIcon+"'>"));return e.append($("<li>").append(b))});b.append(e);return b};a.prototype.renderButtonGroup=function(a){var b,e=this;b=$("<div>");b.addClass("btn-group");_.each(a,function(a){var d;return null!=(d=e.renderButton(a))?d.appendTo(b):void 0});return b};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.ModalView=function(b){function a(){this._onClickBackdrop=__bind(this._onClickBackdrop,this);this._onClickDismissModal=__bind(this._onClickDismissModal,this);this._onGlobalKeyupEscape=__bind(this._onGlobalKeyupEscape,this);this._onGlobalKeyupEnter=__bind(this._onGlobalKeyupEnter,this);this._onGlobalKeyup=__bind(this._onGlobalKeyup,this);this._onHidden=__bind(this._onHidden,this);this._onHide=__bind(this._onHide,this);this._onShown=__bind(this._onShown,this);this._onShow=__bind(this._onShow,
this);this._onHiddenEvent=__bind(this._onHiddenEvent,this);this._onHideEvent=__bind(this._onHideEvent,this);this._onShownEvent=__bind(this._onShownEvent,this);this._onShowEvent=__bind(this._onShowEvent,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);this._toolbarButtons=__bind(this._toolbarButtons,this);this.render=__bind(this.render,this);this._initializeToolbarView=__bind(this._initializeToolbarView,this);this.initialize=__bind(this.initialize,this);this.events=__bind(this.events,
this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("modal-view modal hide");a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{title:"",closeButtonName:"Close",show:!1,fadeIn:!0,fadeOut:!1,backdrop:!0,additionalButtons:{before:[],after:[]}})};a.prototype.events=function(){return _.extend(a.__super__.events.apply(this,arguments),{show:this._onShowEvent,shown:this._onShownEvent,
hide:this._onHideEvent,hidden:this._onHiddenEvent,"click .dismiss-modal":this._onClickDismissModal})};a.prototype.template=_.template('<div class="modal-header">\n  <button type="button" class="close dismiss-modal">\u00d7</button>\n  <h3 class="modal-title"><%= title %></h3>\n</div>\n<div class="modal-body"></div>\n<div class="modal-footer"></div>');a.prototype.initialize=function(){a.__super__.initialize.apply(this,arguments);return this._initializeToolbarView()};a.prototype._initializeToolbarView=
function(){var a,b,e;a=this._toolbarButtons();if(_.isArray(null!=(b=this.options.additionalButtons)?b.before:void 0))a=this.options.additionalButtons.before.concat(a);if(_.isArray(null!=(e=this.options.additionalButtons)?e.after:void 0))a=a.concat(this.options.additionalButtons.after);return this.toolbarView=new athena.lib.ToolbarView({eventhub:this.eventhub,buttons:a})};a.prototype.render=function(){a.__super__.render.apply(this,arguments);this.$el.empty();this.$el.append(this.template({title:this.options.title}));
this.$(".modal-footer").append(this.toolbarView.render().el);this.$el.modal({show:this.options.show,keyboard:!1,backdrop:"static"});return this};a.prototype._toolbarButtons=function(){return[{text:this.options.closeButtonName,id:"close",className:"dismiss-modal"}]};a.prototype.show=function(){return this.$el.modal("show")};a.prototype.hide=function(){return this.$el.modal("hide")};a.prototype._onShowEvent=function(){this.trigger("show");return this._onShow()};a.prototype._onShownEvent=function(){this._onShown();
return this.trigger("shown")};a.prototype._onHideEvent=function(){this.trigger("hide");return this._onHide()};a.prototype._onHiddenEvent=function(){this._onHidden();return this.trigger("hidden")};a.prototype._onShow=function(){return this.options.fadeIn?this.$el.addClass("fade"):this.$el.removeClass("fade")};a.prototype._onShown=function(){$(document).bind("keyup.athena-lib-modal",this._onGlobalKeyup);return $(".modal-backdrop").bind("click.athena-lib-modal",this._onClickBackdrop)};a.prototype._onHide=
function(){$(document).unbind("keyup.athena-lib-modal");$(".modal-backdrop").unbind("click.athena-lib-modal");if(this.options.fadeOut)return this.$el.addClass("fade"),$(".modal-backdrop.in").addClass("fade");this.$el.removeClass("fade");return $(".modal-backdrop.in").removeClass("fade")};a.prototype._onHidden=function(){};a.prototype._onGlobalKeyup=function(a){switch(a.keyCode){case athena.lib.util.keys.ENTER:this._onGlobalKeyupEnter();break;case athena.lib.util.keys.ESCAPE:this._onGlobalKeyupEscape()}return!1};
a.prototype._onGlobalKeyupEnter=function(){return this.hide()};a.prototype._onGlobalKeyupEscape=function(){return this.hide()};a.prototype._onClickDismissModal=function(){return this.hide()};a.prototype._onClickBackdrop=function(){if("static"!==this.options.backdrop)return this.hide()};return a}(athena.lib.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function d(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};
athena.lib.FormModalView=function(b){function a(){this._onGlobalKeyupEnter=__bind(this._onGlobalKeyupEnter,this);this._submit=__bind(this._submit,this);this.clear=__bind(this.clear,this);this.values=__bind(this.values,this);this._toolbarButtons=__bind(this._toolbarButtons,this);this.render=__bind(this.render,this);this._initializeFormView=__bind(this._initializeFormView,this);this.initialize=__bind(this.initialize,this);this.events=__bind(this.events,this);this.defaults=__bind(this.defaults,this);
return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.className=a.classNameExtend("form-modal-view");a.prototype.defaults=function(){return _.extend(a.__super__.defaults.apply(this,arguments),{title:"Form",closeButtonName:"Cancel",submitButtonName:"Submit"})};a.prototype.events=function(){var b=this;return _.extend(a.__super__.events.apply(this,arguments),{"click .submit":function(){return b._submit()}})};a.prototype.initialize=function(){a.__super__.initialize.apply(this,
arguments);return this._initializeFormView()};a.prototype._initializeFormView=function(){this._textareaInputView=new athena.lib.TextareaInputView({eventhub:this.eventhub});this._textareaComponentView=new athena.lib.FormComponentView({eventhub:this.eventhub,inputView:this._textareaInputView,id:"textarea"});this.formView=new athena.lib.FormView({eventhub:this.eventhub});return this.formView.addComponentView(this._textareaComponentView)};a.prototype.render=function(){a.__super__.render.apply(this,arguments);
this.$(".modal-body").append(this.formView.render().el);return this};a.prototype._toolbarButtons=function(){var b;b=a.__super__._toolbarButtons.apply(this,arguments);b.push({text:this.options.submitButtonName,className:"btn-success submit"});return b};a.prototype.values=function(){return this.formView.values()};a.prototype.clear=function(){return this._textareaInputView.value("")};a.prototype._submit=function(){var a,b;if(!this.formView.submit())return!1;a=this.formView.values();if("function"===typeof(b=
this.options).onSubmit)b.onSubmit(a,this);return this.trigger("FormModalView:Submit",a,this)};a.prototype._onGlobalKeyupEnter=function(){};return a}(athena.lib.ModalView);("undefined"!==typeof exports&&null!==exports?exports:this).athena=athena;}).call(this);
