(function(){var test,__bind=function(b,a){return function(){return b.apply(a,arguments)}},athena={lib:{}};athena.lib.util={};athena.lib.util.test={};test=athena.lib.util.test;test.view_with_options=function(b,a,c){a=a||lib.View;c=c||"body";b=new a(b);b.render();$(c).append(b.$el);return b};test.view_with_content=function(b){var a;a=test.view_with_options.apply(this,_.rest(arguments));a.$el.append(b);return a};
test.EventSpy=function(){function b(a,b){this.target=a;this.eventName=b;this.trigger=__bind(this.trigger,this);this.reset=__bind(this.reset,this);this.reset();this.target.on(b,this.trigger)}b.prototype.reset=function(){this.triggered=!1;return this.triggerCount=0};b.prototype.trigger=function(){this.triggered=!0;return this.triggerCount++};return b}();var derives;athena.lib.util.derives=derives=function(b,a){return!b||!b.__super__?!1:a.prototype===b.__super__?!0:derives(b.__super__.constructor,a)};var util,__bind=function(b,a){return function(){return b.apply(a,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(b,a){function c(){this.constructor=b}for(var d in a)__hasProp.call(a,d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c;b.__super__=a.prototype;return b};athena.lib.util.RemoteResource={};athena.lib.util.RemoteResourceInterface={};util=athena.lib.util;
util.RemoteResourceInterface=function(){function b(){}b.prototype.url=function(){};b.prototype.data=function(){};b.prototype.reset=function(){};b.prototype.synced=function(){return!0};b.prototype.sync=function(a){if(a.success)return a.success(this.data())};return b}();
util.RemoteResource=function(b){function a(a){this.sync=__bind(this.sync,this);this.synced=__bind(this.synced,this);this.reset=__bind(this.reset,this);this.data=__bind(this.data,this);this.url=__bind(this.url,this);this.params=_.clone(a);if(!this.params.url)throw Error("remoteResource `url` AJAX param required for sync.");this.url(this.params.url)}__extends(a,b);a.prototype.url=function(a){a&&(this.reset(),this._url=a);return this._url};a.prototype.data=function(){if(!this._synced)throw Error("not synced. cannot access data.");
return _.clone(this._data)};a.prototype.reset=function(){this._synced=!1;return this._data=void 0};a.prototype.synced=function(){return this._synced};a.prototype.sync=function(a){var b,e=this;if(a.url)throw Error("remoteResource.sync doesn't take url parameter.");a=_.extend({},this.params,a);b=a.success||function(){};if(this._synced&&!a.force)return b(this.data()),this;a.url=this._url;a.success=function(a,c,f){e._data=a;e._synced=!0;return b(e.data(),c,f)};$.ajax(a);return this};return a}(util.RemoteResourceInterface);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function c(){this.constructor=b}for(var d in a)__hasProp.call(a,d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c;b.__super__=a.prototype;return b};
athena.lib.View=function(b){function a(){this.events=__bind(this.events,this);this.defaults=__bind(this.defaults,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.defaults=function(){return{extraClasses:[],eventhub:void 0}};a.prototype.events=function(){return{}};a.prototype.initialize=function(){var b=this;a.__super__.initialize.call(this);_.defaults(this.options,this.defaults);this.eventhub=this.options.eventhub||this;_.bindAll(this);if(this.options.extraClasses)return _.each(this.options.extraClasses,
function(a){return b.$el.addClass(a)})};a.prototype.destroy=function(){this.rendering=!1;this.remove();this.unbind();return this.uninitialize()};a.prototype.rendering=!1;a.prototype.render=function(){a.__super__.render.call(this);this.rendering=!0;return this.delegateEvents()};a.prototype.softRender=function(){if(this.rendering)return this.render()};a.prototype.uninitialize=function(){};return a}(Backbone.View);__bind=function(b,a){return function(){return b.apply(a,arguments)}};__hasProp={}.hasOwnProperty;__extends=function(b,a){function c(){this.constructor=b}for(var d in a)__hasProp.call(a,d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c;b.__super__=a.prototype;return b};
athena.lib.ContainerView=function(b){function a(){this.render=__bind(this.render,this);this.content=__bind(this.content,this);this.initialize=__bind(this.initialize,this);return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.initialize=function(){a.__super__.initialize.call(this);return this.content(this.options.content)};a.prototype.content=function(a){null!=a&&(this.rendering&&this._content instanceof Backbone.View&&this._content.remove(),this._content=a,this.softRender());
return this._content};a.prototype.render=function(){a.__super__.render.call(this);this.$el.empty();if(this._content instanceof Backbone.View)this._content.render(),this.$el.append(this._content.el);else if(this._content instanceof $)this.$el.append(this._content);else if(_.isString(this._content))this.$el.append(this._content);else if(_.isObject(this._content)){if(!this.template)throw Error("ContainerView has no template to use.");this.$el.html(this.template(this._content))}else if(null!=this._content)throw Error("ContainerView content type unknown.");
return this};return a}(athena.lib.View);("undefined"!==typeof exports&&null!==exports?exports:this).athena=athena;}).call(this);
